clc; clear all; close all;

% Sample RSS values from serving and neighboring cells (in dBm)
time = 1:20;  % Time intervals
serving_RSS = -50 + randn(1,20);      % Serving cell RSS fluctuates
neighbor_RSS = -55 + 0.5*time;        % Neighbor cell RSS improves as mobile moves

hysteresis = 2;  % dB

handoff_time = 0;

disp('Time  Serving_RSS(dBm)  Neighbor_RSS(dBm)  Handoff');

for t = 1:length(time)
    if neighbor_RSS(t) > serving_RSS(t) + hysteresis
        handoff = 'Yes';
        if handoff_time == 0
            handoff_time = t;  % record first handoff occurrence
        end
    else
        handoff = 'No';
    end
    fprintf('%2d     %6.2f             %6.2f             %s\n', ...
        time(t), serving_RSS(t), neighbor_RSS(t), handoff);
end

fprintf('\nHandoff occurred first at time interval: %d\n', handoff_time);

% Plot RSS vs Time
figure;
plot(time, serving_RSS, '-o', 'LineWidth',2); hold on;
plot(time, neighbor_RSS, '-s', 'LineWidth',2);
yline(min(serving_RSS)-5,'k--'); % Threshold line
xlabel('Time interval');
ylabel('Received Signal Strength (dBm)');
title('Handoff Simulation');
legend('Serving Cell','Neighbor Cell');
grid on;
